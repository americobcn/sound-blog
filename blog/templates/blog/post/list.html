{% extends "blog/base.html" %}
{% load blog_tags %}
{% block content %}
  {% if tag %}<h2>Posts tagged with "{{ tag.name }}"</h2>{% endif %}
  <div class="lg:grid lg:grid-cols-12 w-full">
    <div class="col-span-10 mx-auto">
      <div class="hero items-center mb-5 m-2 md:mx-auto ">
        <div>
          <h2 class="text-3xl text-amber-400">
            <a href="{{ posts.0.get_absolute_url }}">{{ posts.0.title }}</a>
          </h2>
          {% for tag in posts.0.tags.all %}
            <a href="{% url "blog:post_list_by_tag" tag.slug %}" class="text-xs">{{ tag.name }}</a>
            {% if not forloop.last %},{% endif %}
          {% endfor %}
          <span class="text-gray-200">{{ posts.0.body|truncatewords:50|linebreaks }}</span>
          <p class="mb-4 text-xs font-thin text-gray-300">Published {{ posts.0.publish }} by {{ posts.0.author }}</p>
        </div>
        <img class="my-2 h-auto w-full justify-self-center rounded-md max-sm:hidden sepia blur-xs backdrop-invert-65"
             width="300"
             height="300"
             src="https://xiengineering.com/wp-content/uploads/2021/06/What-is-Sound-Pressure-Level.jpg"
             alt="vumeter" />
      </div>
      <ul class="grid grid-cols-1 md:grid-cols-3">
        {% for post in posts|slice:"1:" %}
          <li class="card m-3 items-center">
            <article>
              <h2 class="text-3xl text-amber-300">
                <a href="{{ post.get_absolute_url }}">{{ post.title }}</a>
              </h2>
              {% for tag in post.tags.all %}
                <a href="{% url "blog:post_list_by_tag" tag.slug %}" class="text-xs">{{ tag.name }}</a>
                {% if not forloop.last %},{% endif %}
              {% endfor %}
              <span class=" text-gray-300">{{ post.body|truncatewords:40|linebreaks }}</span>
              <p class="mt-0.5 text-xs font-thin text-gray-300">Published {{ post.publish }} by {{ post.author }}</p>
            </article>
          </li>
        {% endfor %}
      </ul>
    </div>
    <div class="hidden sidebar lg:flex lg:flex-col lg:col-span-2">
      <h3 class="text-center text-xl text-amber-200">Latest Posts</h3>
      <div class="text-center text-gray-300">{% show_latest_posts 3 %}</div>
    </div>
  </div>
  {% include "pagination.html" with page=posts %}
{% endblock content %}
